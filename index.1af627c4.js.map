{"mappings":"AAAA,MAAMA,EAAQ,CACZC,KAAM,CACJC,KAAM,IAERC,UAAW,GACXC,WACE,OAAOC,KAAKJ,MAEdK,SAASC,GACPF,KAAKJ,KAAOM,EACZ,IAAK,MAAMC,KAAMH,KAAKF,UACpBK,KAGJC,UAAUC,GACRL,KAAKF,UAAUQ,KAAKD,IAEtBE,QAAQC,GACN,MAAMC,EAAKT,KAAKD,WAChBU,EAAGZ,KAAKS,KAAKE,GACbR,KAAKC,SAASQ,KClBlB,MAAMC,UAAeC,YACnBC,OAASZ,KAAKa,aAAa,CAAEC,KAAM,SAEnCC,cACEC,QACAhB,KAAKiB,SAEPC,oBACelB,KAAKY,OAAOO,cAAc,SAClCC,iBAAiB,UAAWC,IAC/BA,EAAEC,iBACF,MAAMC,EAAIF,EAAEG,OACZC,QAAQC,IAAIH,EAAEI,KAAKC,OAEnBjC,EAAMY,QAAQgB,EAAEI,KAAKC,UAGzBX,SACEjB,KAAKY,OAAOiB,UAAY,yJClB5B,MAAMC,UAAiBnB,YACrBC,OAASZ,KAAKa,aAAa,CAAEC,KAAM,SAEnCC,cACEC,QAEFE,oBACEvB,EAAMS,WAAU,KACdJ,KAAKiB,YAITA,SACE,MAAMpB,EAAOF,EAAMI,WAAWF,KAC9B4B,QAAQC,IAAI7B,GAGZG,KAAKY,OAAOiB,UAAY,wEASzBhC,EAAAkC,KAAAvB,GACF,OAAAA,WACDwB,KAAe","sources":["src/state.ts","src/form.ts","src/list.ts"],"sourcesContent":["const state = {\r\n  data: {\r\n    list: [],\r\n  },\r\n  listeners: [],\r\n  getState() {\r\n    return this.data;\r\n  },\r\n  setState(newState) {\r\n    this.data = newState;\r\n    for (const cb of this.listeners) {\r\n      cb();\r\n    }\r\n  },\r\n  subscribe(callback: (any) => any) {\r\n    this.listeners.push(callback);\r\n  },\r\n  addItem(item: string) {\r\n    const cs = this.getState();\r\n    cs.list.push(item);\r\n    this.setState(cs);\r\n  },\r\n};\r\n\r\nexport { state };\r\n","import { state } from \"./state\";\r\n\r\nclass Myform extends HTMLElement {\r\n  shadow = this.attachShadow({ mode: \"open\" });\r\n\r\n  constructor() {\r\n    super();\r\n    this.render();\r\n  }\r\n  connectedCallback() {\r\n    const form = this.shadow.querySelector(\".form\");\r\n    form.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      const f = e.target as any;\r\n      console.log(f.text.value);\r\n      \r\n      state.addItem(f.text.value);\r\n    });\r\n  }\r\n  render() {\r\n    this.shadow.innerHTML = `\r\n        <form class=\"form\">\r\n        <input name=\"text\"/>\r\n        <button>+</button>\r\n        </form>\r\n        `;\r\n  }\r\n}\r\ncustomElements.define(\"my-form\", Myform);\r\n","import { state } from \"./state\";\r\n\r\nclass TodoList extends HTMLElement {\r\n  shadow = this.attachShadow({ mode: \"open\" });\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n  connectedCallback(){\r\n    state.subscribe(() => {\r\n      this.render();\r\n    });\r\n  }\r\n \r\n  render() {\r\n    const list = state.getState().list;\r\n    console.log(list);\r\n    \r\n\r\n    this.shadow.innerHTML = `\r\n        <div style=\"border:solid 2px red\">\r\n        <ul>\r\n         ${list.map((item)=>{\r\n           return `<li>${item}</li>`\r\n         }).join(\"\")}\r\n         </ul>\r\n        </div>\r\n        `;\r\n  }\r\n}\r\ncustomElements.define(\"my-list\", TodoList);\r\n"],"names":["$0b89d474933103bc$export$ca000e230c0caa3e","data","list","listeners","getState","this","setState","newState","cb","subscribe","callback","push","addItem","item","cs","$1763b227c722b862$var$Myform","HTMLElement","shadow","attachShadow","mode","constructor","super","render","connectedCallback","querySelector","addEventListener","e","preventDefault","f","target","console","log","text","value","innerHTML","$d0f18d7cc08194e8$var$TodoList","map","join"],"version":3,"file":"index.1af627c4.js.map"}